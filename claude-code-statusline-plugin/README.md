# Claude Code çŠ¶æ€æ æ’ä»¶

åœ¨ Claude Code çš„çŠ¶æ€æ ä¸­å®æ—¶æ˜¾ç¤ºç”¨æˆ·æœ€æ–°è¾“å…¥çš„ç®€åŒ–ç‰ˆæœ¬ï¼Œæ–¹ä¾¿å¿«é€Ÿäº†è§£å½“å‰å¯¹è¯ä¸Šä¸‹æ–‡ã€‚

## æ•ˆæœå±•ç¤º

```
ç”¨æˆ·è¾“å…¥: "å¥½çš„ï¼Œè¯·å¸®æˆ‘åˆ›å»ºä¸€ä¸ª Django é¡¹ç›®"
çŠ¶æ€æ æ˜¾ç¤º: [æœ€æ–°æŒ‡ä»¤:åˆ›å»ºä¸€ä¸ª Django é¡¹ç›®...]
```

## åŠŸèƒ½ç‰¹æ€§

- âœ… **å®æ—¶æ›´æ–°** - æ¯æ¬¡ç”¨æˆ·è¾“å…¥åè‡ªåŠ¨æ›´æ–°çŠ¶æ€æ 
- âœ… **æ™ºèƒ½æ‘˜è¦** - è‡ªåŠ¨å»é™¤æ— æ„ä¹‰çš„å‰ç¼€è¯ï¼ˆå¦‚"è¯·å¸®æˆ‘"ã€"å¥½çš„"ç­‰ï¼‰
- âœ… **ä¸­è‹±æ–‡æ”¯æŒ** - é’ˆå¯¹ä¸­è‹±æ–‡åˆ†åˆ«ä¼˜åŒ–æ‘˜è¦ç®—æ³•
- âœ… **å¯é…ç½®** - æ”¯æŒè‡ªå®šä¹‰æ˜¾ç¤ºé•¿åº¦å’Œæ ¼å¼
- âœ… **è½»é‡çº§** - çº¯ Python å®ç°ï¼Œæ— å¤–éƒ¨ä¾èµ–

## å®‰è£…æ–¹æ³•

> ğŸ’¡ **é‡è¦è¯´æ˜**ï¼šæ­¤æ’ä»¶ä¼šå®‰è£…åˆ°**å…¨å±€é…ç½®ç›®å½•**ï¼ˆ`C:\Users\ä½ çš„ç”¨æˆ·å\.claude\`ï¼‰ï¼Œå®‰è£…å**æ‰€æœ‰é¡¹ç›®**éƒ½ä¼šå¯ç”¨çŠ¶æ€æ ã€‚ä½ å¯ä»¥åœ¨**ä»»æ„ç›®å½•**æ‰§è¡Œå®‰è£…è„šæœ¬ã€‚

### æ–¹å¼ä¸€ï¼šè‡ªåŠ¨å®‰è£…ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†æˆ–ä¸‹è½½æ­¤ä»“åº“
git clone https://github.com/MrSong9957/sry-skills.git
cd sry-skills/claude-code-statusline-plugin

# 2. è¿è¡Œå®‰è£…è„šæœ¬
chmod +x install.sh
./install.sh
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å®‰è£…

```bash
# 1. åˆ›å»ºæ’ä»¶ç›®å½•
mkdir -p ~/.claude/plugins/custom/show-last-prompt/statusline

# 2. å¤åˆ¶è„šæœ¬æ–‡ä»¶
cp show-prompt.py ~/.claude/plugins/custom/show-last-prompt/statusline/
chmod +x ~/.claude/plugins/custom/show-last-prompt/statusline/show-prompt.py

# 3. ä¿®æ”¹ ~/.claude/settings.jsonï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
{
  "statusLine": {
    "type": "command",
    "command": "python3 ~/.claude/plugins/custom/show-last-prompt/statusline/show-prompt.py"
  }
}
```

## é…ç½®é€‰é¡¹

ç¼–è¾‘ `show-prompt.py` æ–‡ä»¶é¡¶éƒ¨çš„é…ç½®å‚æ•°ï¼š

```python
# ä¸­æ–‡æ˜¾ç¤ºå­—æ•°é™åˆ¶ï¼ˆé»˜è®¤: 15ï¼‰
CHINESE_MAX_LENGTH = 15

# è‹±æ–‡æ˜¾ç¤ºå•è¯æ•°é™åˆ¶ï¼ˆé»˜è®¤: 10ï¼‰
ENGLISH_MAX_WORDS = 10

# çŠ¶æ€æ æ˜¾ç¤ºæ ¼å¼ï¼ˆé»˜è®¤: "[æœ€æ–°æŒ‡ä»¤:{summary}]"ï¼‰
STATUS_FORMAT = "[æœ€æ–°æŒ‡ä»¤:{summary}]"
```

## æ™ºèƒ½æ‘˜è¦è§„åˆ™

### ä¸­æ–‡è¾“å…¥

| åŸå§‹è¾“å…¥ | æ‘˜è¦ç»“æœ |
|---------|---------|
| "å¥½çš„ï¼Œè¯·å¸®æˆ‘åˆ›å»ºä¸€ä¸ª Django é¡¹ç›®" | "åˆ›å»ºä¸€ä¸ª Django é¡¹ç›®..." |
| "ä½†æ˜¯ï¼Œæˆ‘è¦ä½ ä¿®æ”¹ä¸€ä¸‹é…ç½®" | "ä¿®æ”¹ä¸€ä¸‹é…ç½®..." |
| "ç°åœ¨å¼€å§‹å†™æµ‹è¯•ç”¨ä¾‹" | "å†™æµ‹è¯•ç”¨ä¾‹..." |

### è‹±æ–‡è¾“å…¥

| åŸå§‹è¾“å…¥ | æ‘˜è¦ç»“æœ |
|---------|---------|
| "Please help me create a React app" | "create a React app..." |
| "Could you please fix the bug" | "fix the bug..." |

## å¸è½½æ–¹æ³•

```bash
# è¿è¡Œå¸è½½è„šæœ¬
./install.sh --uninstall

# æˆ–æ‰‹åŠ¨åˆ é™¤
rm -rf ~/.claude/plugins/custom/show-last-prompt
# ç„¶åç¼–è¾‘ ~/.claude/settings.json ç§»é™¤ statusLine é…ç½®
```

## å·¥ä½œåŸç†

1. Claude Code åœ¨æ¯æ¬¡çŠ¶æ€æ åˆ·æ–°æ—¶ï¼Œå°†ä¸Šä¸‹æ–‡ä¿¡æ¯é€šè¿‡ stdin ä¼ é€’ç»™è„šæœ¬
2. è„šæœ¬ä»ä¼ å…¥çš„ JSON ä¸­è·å– `transcript_path`ï¼ˆä¼šè¯è®°å½•æ–‡ä»¶è·¯å¾„ï¼‰
3. è¯»å–ä¼šè¯æ–‡ä»¶ï¼Œè§£æ JSONL æ ¼å¼ï¼Œæ‰¾åˆ°æœ€æ–°çš„ç”¨æˆ·æ¶ˆæ¯
4. åº”ç”¨æ™ºèƒ½æ‘˜è¦è§„åˆ™ï¼Œæå–å…³é”®ä¿¡æ¯
5. è¾“å‡ºæ ¼å¼åŒ–ç»“æœåˆ° stdoutï¼Œæ˜¾ç¤ºåœ¨çŠ¶æ€æ 

## ç³»ç»Ÿè¦æ±‚

- Python 3.6+
- Claude Code 2.0+

## æ•…éšœæ’é™¤

**çŠ¶æ€æ æ˜¾ç¤ºä¸ºç©º `[]`ï¼Ÿ**
- æ£€æŸ¥æ˜¯å¦æœ‰æœ€è¿‘çš„ç”¨æˆ·è¾“å…¥ï¼ˆå·¥å…·è¿”å›ç»“æœä¼šè¢«è·³è¿‡ï¼‰
- ç¡®è®¤è„šæœ¬è·¯å¾„åœ¨ settings.json ä¸­æ­£ç¡®é…ç½®

**çŠ¶æ€æ æ²¡æœ‰æ›´æ–°ï¼Ÿ**
- é‡å¯ Claude Code
- æ£€æŸ¥ Python 3 æ˜¯å¦å¯ç”¨ï¼š`python3 --version`

## è®¸å¯è¯

MIT License

## ä½œè€…

[MrSong9957](https://github.com/MrSong9957)
